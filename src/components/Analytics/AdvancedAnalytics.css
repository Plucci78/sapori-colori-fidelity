/* ===================================
   ADVANCED ANALYTICS - STYLESHEET V7
   Stile "Editoriale Chiaro" - Massima Leggibilit√†
   =================================== */

/* === STILI GENERALI (INVARIATI) === */
.analytics-dashboard { padding: var(--space-6, 24px); background: var(--gray-100, #f3f4f6); min-height: 100vh; animation: analytics-fadeIn 0.5s ease-out; }
.analytics-header { background: var(--bg-primary, #ffffff); border: 1px solid var(--gray-200, #e5e7eb); border-radius: var(--radius-lg, 12px); padding: var(--space-6, 24px); margin-bottom: var(--space-8, 32px); box-shadow: var(--shadow-lg, 0 10px 15px -3px rgb(0 0 0 / 0.1)); }
.analytics-header .card-title { font-size: 1.6rem; font-weight: 800; color: var(--text-primary, #111827); }
.analytics-header .card-subtitle { color: var(--text-secondary, #4b5563); font-size: 1rem; }
.analytics-controls { display: flex; flex-wrap: wrap; gap: var(--space-4, 16px); align-items: flex-end; margin-top: var(--space-4, 16px); }
.analytics-control-label { font-weight: 600; font-size: 0.875rem; color: var(--text-primary, #111827); margin-bottom: var(--space-1, 4px); }
.analytics-input, .analytics-select { padding: var(--space-2, 8px) var(--space-3, 12px); border: 1px solid var(--gray-300, #D1D5DB); border-radius: var(--radius-md, 8px); font-size: 0.9rem; transition: all 0.2s ease; background: var(--bg-primary, #ffffff); color: black; }
.analytics-input:focus, .analytics-select:focus { outline: none; border-color: var(--brand-primary, #8B4513); box-shadow: 0 0 0 3px rgba(139, 69, 19, 0.2); }
.analytics-controls-actions { display: flex; gap: var(--space-3, 12px); margin-left: auto; }
.analytics-btn { padding: var(--space-3, 12px) var(--space-5, 20px); border: none; border-radius: var(--radius-md, 8px); font-weight: 700; font-size: 0.9rem; cursor: pointer; transition: all 0.2s ease; display: flex; align-items: center; gap: var(--space-2, 8px); box-shadow: var(--shadow-sm, 0 1px 2px 0 rgb(0 0 0 / 0.05)); }
.analytics-btn:hover { transform: translateY(-2px); box-shadow: var(--shadow-lg, 0 10px 15px -3px rgb(0 0 0 / 0.1)); }
.analytics-btn.primary { background: var(--bg-brand, linear-gradient(135deg, #8B4513 0%, #A0522D 100%)); color: white; border: 1px solid transparent; }
.analytics-btn.secondary { background: var(--bg-primary, #ffffff); color: var(--text-primary, #111827); border: 1px solid var(--gray-300, #D1D5DB); }
.analytics-btn.secondary:hover { background: var(--gray-100, #f3f4f6); border-color: var(--brand-primary, #8B4513); }
.analytics-kpi-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: var(--space-6, 24px); margin-bottom: var(--space-8, 32px); }
.analytics-kpi-card { background: var(--bg-primary, #ffffff); border: 1px solid var(--gray-200, #e5e7eb); border-radius: var(--radius-xl, 16px); padding: var(--space-5, 20px); transition: all 0.3s ease; position: relative; overflow: hidden; box-shadow: var(--shadow-lg, 0 10px 15px -3px rgb(0 0 0 / 0.1)); }
.analytics-kpi-card:hover { transform: translateY(-5px); box-shadow: var(--shadow-xl, 0 20px 25px -5px rgb(0 0 0 / 0.1)); border-color: var(--brand-primary, #8B4513); }
.analytics-kpi-card::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 6px; background: var(--bg-brand, linear-gradient(90deg, #8B4513, #D4AF37)); }
.analytics-kpi-icon { width: 50px; height: 50px; background: var(--bg-brand, linear-gradient(135deg, #8B4513, #D4AF37)); border-radius: var(--radius-lg, 12px); display: flex; align-items: center; justify-content: center; margin-bottom: var(--space-4, 16px); box-shadow: 0 8px 20px rgba(139, 69, 19, 0.3); }
.analytics-kpi-icon svg, .analytics-kpi-icon span { color: white; width: 26px; height: 26px; }
.analytics-kpi-content h3 { font-size: 0.9rem; font-weight: 700; color: var(--text-secondary, #4b5563); text-transform: uppercase; letter-spacing: 0.05em; }
.analytics-kpi-value { font-size: 2.5rem; font-weight: 800; color: var(--text-primary, #111827); line-height: 1.1; }
.analytics-kpi-change { font-size: 0.9rem; font-weight: 700; }
.analytics-detailed-table, .analytics-top-customers { background: var(--bg-primary, #ffffff); border: 1px solid var(--gray-200, #e5e7eb); border-radius: var(--radius-lg, 12px); padding: var(--space-6, 24px); margin-bottom: var(--space-8, 32px); box-shadow: var(--shadow-lg, 0 10px 15px -3px rgb(0 0 0 / 0.1)); }
.analytics-detailed-table h3, .analytics-top-customers h3 { font-size: 1.3rem; font-weight: 800; color: var(--text-primary, #111827); margin: 0 0 var(--space-5, 20px) 0; padding-bottom: var(--space-3, 12px); border-bottom: 1px solid var(--gray-200, #e5e7eb); }
.analytics-top-customers .analytics-customer-list { display: flex; flex-direction: column; gap: var(--space-4, 16px); }
.analytics-customer-row { display: flex; align-items: center; gap: var(--space-4, 16px); padding: var(--space-4, 16px); border-radius: var(--radius-lg, 12px); transition: all 0.3s ease; background: linear-gradient(to right, var(--gray-50, #f9fafb), var(--bg-primary, #ffffff)); border: 1px solid var(--gray-200, #e5e7eb); cursor: pointer; }
.analytics-customer-row:hover { transform: scale(1.03); box-shadow: var(--shadow-xl, 0 20px 25px -5px rgb(0 0 0 / 0.1)); border-color: var(--brand-secondary, #D4AF37); z-index: 10; position: relative; }
.analytics-customer-rank { width: 48px; height: 48px; border-radius: 50%; font-weight: 800; font-size: 1.3rem; color: white; flex-shrink: 0; display: flex; align-items: center; justify-content: center; text-shadow: 1px 1px 3px rgba(0,0,0,0.3); border: 2px solid white; }
.analytics-customer-rank.gold { background: linear-gradient(135deg, #FBBF24, #D97706); box-shadow: 0 5px 20px rgba(217, 119, 6, 0.5); }
.analytics-customer-rank.silver { background: linear-gradient(135deg, #E5E7EB, #9CA3AF); box-shadow: 0 5px 20px rgba(107, 114, 128, 0.5); }
.analytics-customer-rank.bronze { background: linear-gradient(135deg, #CD853F, #8B4513); box-shadow: 0 5px 20px rgba(146, 64, 14, 0.5); }
.analytics-customer-details { flex-grow: 1; }
.analytics-customer-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--space-2, 8px); }
.analytics-customer-name { font-weight: 700; font-size: 1.2rem; color: var(--text-primary, #111827); }
.analytics-customer-status-badge { font-size: 0.75rem; font-weight: 700; padding: 4px 10px; border-radius: 20px; text-transform: uppercase; letter-spacing: 0.5px; }
.analytics-customer-status-badge.gold { background-color: #FFFBEB; color: #B45309; border: 1px solid #FBBF24; }
.analytics-customer-status-badge.silver { background-color: #EFF6FF; color: #1E40AF; border: 1px solid #60A5FA; }
.analytics-customer-status-badge.new { background-color: #ECFDF5; color: #047857; border: 1px solid #34D399; }
.analytics-customer-status-badge.standard { background-color: var(--gray-100, #f3f4f6); color: var(--text-secondary, #4b5563); border: 1px solid var(--gray-300, #d1d5db); }
.analytics-customer-spend-bar-container { height: 8px; width: 100%; background-color: var(--gray-200, #e5e7eb); border-radius: 4px; margin-bottom: var(--space-3, 12px); }
.analytics-customer-spend-bar { height: 100%; background: var(--bg-brand, linear-gradient(to right, #8B4513, #D4AF37)); border-radius: 4px; transition: width 0.5s ease-out; }
.analytics-customer-stats { display: flex; flex-wrap: wrap; gap: var(--space-4, 16px); font-size: 0.9rem; }
.analytics-customer-stat { display: flex; align-items: center; gap: var(--space-1, 4px); color: var(--text-secondary, #4b5563); }
.analytics-customer-stat strong { color: var(--text-primary, #111827); font-weight: 600; }
.analytics-detailed-table .analytics-table-wrapper { overflow-x: auto; }
.analytics-table { width: 100%; border-collapse: separate; border-spacing: 0; font-family: 'Roboto Mono', monospace; }
.analytics-table th { padding: var(--space-3, 12px) var(--space-4, 16px); font-size: 0.8rem; font-weight: 700; color: var(--text-secondary, #4b5563); text-align: left; text-transform: uppercase; letter-spacing: 0.05em; border-bottom: 2px solid var(--gray-300, #D1D5DB); }
.analytics-table td { padding: var(--space-4, 16px); border-bottom: 1px solid var(--gray-200, #e5e7eb); color: var(--text-primary, #111827); font-weight: 500; vertical-align: middle; }
.analytics-table tbody tr:hover { background-color: #FFFBEB; }
.data-bar-cell { display: flex; flex-direction: column; gap: 4px; }
.data-bar-cell span { font-weight: 600; }
.data-bar-container { height: 10px; width: 100%; background-color: var(--gray-100, #f3f4f6); border-radius: 5px; }
.data-bar { height: 100%; border-radius: 5px; transition: width 0.5s ease-out; }
.data-bar.revenue { background: linear-gradient(to right, var(--brand-accent, #CD853F), var(--brand-primary, #8B4513)); }
.data-bar.transactions { background: linear-gradient(to right, var(--brand-secondary, #D4AF37), var(--brand-accent, #CD853F)); }
.growth-indicator { display: flex; align-items: center; gap: 6px; font-weight: 700; font-size: 1rem; }
.growth-indicator span { width: 20px; height: 20px; }
.growth-indicator.positive { color: var(--success, #059669); }
.growth-indicator.negative { color: var(--error, #EF4444); }
.growth-indicator.neutral { color: var(--text-muted, #9ca3af); }

.analytics-charts-grid,
.analytics-secondary-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
  gap: var(--space-6, 24px);
  margin-bottom: var(--space-6, 24px);
}

.recharts-bar-rectangle {
  transition: all 0.2s ease;
}

.recharts-bar-rectangle:hover {
  fill: var(--brand-primary, #8B4513);
}

/* === GRAFICI "EDITORIALE CHIARO" === */
.analytics-chart-container {
  background: var(--bg-primary, #ffffff);
  border: 1px solid var(--gray-200, #e5e7eb);
  box-shadow: var(--shadow-lg, 0 10px 15px -3px rgb(0 0 0 / 0.1));
}

.analytics-chart-title {
  color: var(--text-primary, #111827);
  border-bottom-color: var(--gray-200, #e5e7eb);
  text-shadow: none;
}

.analytics-chart-wrapper {
  width: 100%;
  height: 320px;
}

/* Linee e Aree Pulite */
.chart-line-transactions .recharts-line-curve {
  stroke-dasharray: 0; /* Rimuove animazione di disegno */
  animation: none;
}

.chart-line-transactions, .chart-area-revenue {
  filter: none; /* Rimuove effetto glow */
}

/* Punti dati sobri */
.chart-active-dot {
  stroke: var(--brand-primary, #8B4513);
  stroke-width: 2;
  fill: var(--bg-primary, #ffffff);
  filter: drop-shadow(0 2px 4px rgba(0,0,0,0.2));
  animation: none;
  r: 6 !important; /* Dimensione fissa */
}

/* Griglia discreta */
.recharts-wrapper .recharts-cartesian-grid-horizontal line,
.recharts-wrapper .recharts-cartesian-grid-vertical line {
  stroke: var(--gray-200, #e5e7eb);
  stroke-opacity: 1;
  stroke-dasharray: 4 4;
}

/* Assi e Legenda leggibili */
.recharts-wrapper .recharts-cartesian-axis-tick-value {
  fill: var(--text-secondary, #4b5563);
  font-size: 12px;
  font-weight: 500;
}

.recharts-wrapper .recharts-legend-item-text {
  color: var(--text-primary, #111827) !important;
  font-weight: 600;
}

/* Tooltip Pulito e Professionale */
.analytics-custom-tooltip {
  background: var(--bg-primary, #ffffff);
  border: 1px solid var(--gray-300, #d1d5db);
  border-radius: var(--radius-md, 8px);
  padding: var(--space-3, 12px);
  box-shadow: var(--shadow-lg, 0 10px 15px -3px rgb(0 0 0 / 0.1));
  color: var(--text-primary, #111827);
}

.tooltip-label { font-weight: 700; margin-bottom: 8px; color: var(--text-primary, #111827); }
.tooltip-item { display: flex; align-items: center; gap: 8px; padding: 4px 0; }
.tooltip-color-swatch { width: 12px; height: 12px; border-radius: 3px; }
.tooltip-name { font-weight: 500; color: var(--text-secondary, #4b5563); }
.tooltip-value { font-weight: 700; margin-left: auto; }
